syntax = "proto3";

package classService.v1;

import "google/api/annotations.proto";
import "validate/validate.proto";

option go_package = "classService/api/classService/v1;v1";

// The greeting service definition.
service ClassService {
  // Sends a greeting
  rpc SearchClass (SearchRequest) returns (SearchReply) {
    option (google.api.http) = {
      get: "/classService/search/{searchKeyWords}"
    };
  }

  rpc AddClassByHand (AddClassByHandRequest) returns (AddClassByHandReply) {
      option (google.api.http) = {
        post: "/classService/addByHand"
        body: "*"
      };

  }
  rpc AddClassBySearch (AddClassBySearchRequest) returns (AddClassBySearchReply) {
      option (google.api.http) = {
          post: "/classService/addBySearch"
          body: "*"
      };
  }

}

// The request message containing the user's name.
message SearchRequest {
  string searchKeyWords = 1;
}

// The response message containing the greetings
message SearchReply {
  repeated ClassInfo class_infos = 1;
}
message AddClassByHandRequest {
    string stu_id=1 [(validate.rules).string = {min_len: 10, max_len: 10}];//学号
    string name=2 [(validate.rules).string = {min_len: 1}];//课程名称
    string dur_class=3 [(validate.rules).string = {min_len: 1}];//第几节 '形如 "1-3","1-1"'
    string where=4 [(validate.rules).string = {min_len: 1}];//地点
    string teacher=5 [(validate.rules).string = {min_len: 1}];//教师
    int64  weeks=6 [(validate.rules).int64 = {gt: 0}]; //哪些周
    string semester=7 [(validate.rules).string = {min_len: 1,max_len: 1}]; // 学期
    string year=8 [(validate.rules).string = {min_len: 1}]; //学年
    int64 day=9 [(validate.rules).int64 = {gte: 1, lte: 7}];//星期几
    double credit=10; //学分
}
message AddClassByHandReply {
    string id=1; //添加的课程ID
    string msg=2;
}
message AddClassBySearchRequest {
    ClassInfo class_info = 1;
}
message AddClassBySearchReply {
    string id=1; //添加的课程ID
    string msg=2;
}

message  ClassInfo {
  int64 day=1; //星期几
  string teacher=2;   //任课教师
  string where=3; //上课地点
  string class_when=4;//上课是第几节（如1-2,3,4）
  string week_duration=5; //上课的周数
  string classname=6;//课程名称
  double credit=7; //学分
    // bool add=8;//是否为手动添加
  int64 weeks=9; //哪些周
  string semester=10; //学期 "1"代表第一学期，"2"代表第二学期，"3"代表第三学期
  string year=11; //学年  "2024" 代表"2024-2025学年"
  string id=12;//课程唯一标识
}
